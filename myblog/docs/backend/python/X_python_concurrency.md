# Python并发

[[toc]]

在计算机中，如果你的程序在等待，通常是因为以下两个原因：

- I/O限制，这个限制很常见，计算机的CPU速度非常快，比计算机内存快几百倍，比硬盘或者网络快几千倍。
- CPU限制，在处理数字运算任务时，比如科学计算或者图形计算，很容易遇到这个限制。

并发相关术语：

- 同步(Synchronous)，一件事情接着一件事情处理。
- 异步(asynchronous)，任务是相互独立的。

当你要用简单的系统和任务来处理现实中的问题时，迟早需要处理并发。

假设你有一个网站，必须给用户很快地返回静态和动态网页，一秒是可以接受的，但是如果展示或者交互需要很长时间，用户就会失去耐心，页面速度加载降低一点就会导致流量大幅下降。

但是，如何处理需要长时间执行的任务呢，如上传文件、改变图片大小或者查询数据库？显然无法用同步的Web客户端代码解决这个问题，因为同步就必然会产生等待。

在一台电脑中，如果你想尽快处理多个任务，就需要让它们互相独立。慢任务不应该阻塞其他任务。

下面我们看一下多任务管理方法：队列。



## 队列

队列有点像列表，从一头添加事物，从另一头取出事物，这种队列被称为`FIFO(先进先出)`， 即`First In First Out`。

假设你正在洗盘子，如果需要完成全部工作，需要洗好每一个盘子、烘干并放好。你有很多种方法来完成这个任务。或许人会先洗好第一个盘子，烘干并把它放好。之后用同样的方法来处理第二个盘子，比此类推。此外，你也可以执行批量操作，先洗好所有的盘子，再烘干所有的盘子，最后把它们都放好。这样做需要你有足够大的水池和烘干机来放置每一步积累的所有盘子。这些都是同步方法--一个工人，一次做一件事。

还有一种方法是再找一个或者两个帮手。如果你是洗盘子的人，可以把洗好的盘子递给烘干盘子的人，他再把烘干的盘子递给放置盘子的人。所有人都在自己的位置工作，这样会比你一个人要快得多。


